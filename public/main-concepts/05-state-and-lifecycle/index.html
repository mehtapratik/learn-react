<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1, minimum-scale=1.0"
      />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />

      <title>State and Lifecycle | Main Concepts | Learn React</title>
      <link
         href="/dist/main-concepts/05-state-and-lifecycle/app.css"
         rel="stylesheet"
      />
   </head>

   <body>
      <main class="stage" id="root">
         <h1>State and Lifecycle</h1>
         <h2>State vs. Props</h2>
         <p class="intro">
            State is similar to props, but it is private and fully controlled by
            the component. Usually state is used for data that changes over the
            lifecycle of its component. Props are used to pass data from parent
            component or page. Props are static and do not change over the
            lifecycle of component.
         </p>
         <h2>Lifecycle</h2>
         <p>
            In applications with many components, it’s very important to free up
            resources taken by the components when they are destroyed.
         </p>
         <p>
            The componentDidMount() method runs after the component output has
            been rendered to the DOM. We will tear down the timer in the
            componentWillUnmount() lifecycle method.
         </p>
         <pre id="codeClock">code example</pre>
         <section id="previewClock" class="preview"></section>
         <h2>Using state correctly</h2>
         <p>There are three things you should know about setState().</p>
         <p>Do not modify state directly:</p>
         <pre id="codeStateModification"></pre>
         <p>
            State updates may be asychronous. React may batch multiple
            setState() calls into a single update for performance. Because
            this.props and this.state may be updated asynchronously, you should
            not rely on their values for calculating the next state.
         </p>
         <pre id="codeSateAsynchronicity"></pre>
         <p>
            State Updates are Merged. When you call setState(), React merges the
            object you provide into the current state. For example, your state
            may contain several independent variables. Then you can update them
            independently with separate setState() calls:
         </p>
         <pre id="codeMergedState"></pre>
         <p>
            The merging is shallow, so this.setState({comments}) leaves
            this.state.posts intact, but completely replaces
            this.state.comments.
         </p>
         <h2>Data flows down</h2>
         <p>
            Neither parent nor child components can know if a certain component
            is stateful or stateless, and they shouldn’t care whether it is
            defined as a function or a class.
         </p>
         <p>
            This is why state is often called local or encapsulated. It is not
            accessible to any component other than the one that owns and sets
            it.
         </p>
         <p>
            A component may choose to pass its state down as props to its child
            components. The FormattedDate component would receive the date in
            its props and wouldn’t know whether it came from the Clock’s state,
            from the Clock’s props, or was typed by hand:
         </p>
         <pre id="codeDataFlow"></pre>
         <p>
            This is commonly called a “top-down” or “unidirectional” data flow.
            Any state is always owned by some specific component, and any data
            or UI derived from that state can only affect components “below”
            them in the tree.
         </p>
         <p>
            In React apps, whether a component is stateful or stateless is
            considered an implementation detail of the component that may change
            over time. You can use stateless components inside stateful
            components, and vice versa.
         </p>
      </main>

      <noscript>
         You need to enable JavaScript to run this app.
      </noscript>
      <script src="/dist/main-concepts/05-state-and-lifecycle/app.js"></script>
   </body>
</html>
